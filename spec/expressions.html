<!DOCTYPE html>
<html>
  <head>
    <title>Language Specification</title>
    <link rel="stylesheet" href="/cthulhu/assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
      integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <main>
      <article>
        <h1>Expressions</h1>
        <pre class="grammar"><code><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#expr">expr</a></span> <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#literal">literal</a></span></span>
       <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#if_expr">if_expr</a></span></span>
       <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#match_expr">match_expr</a></span></span>
</span></code></pre>

<h2 id="binary-and-unary-operators">Binary and unary operators</h2>

<h2 id="conditions">Conditions</h2>

<pre class="grammar"><code><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#block">block</a></span>       <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"{"</span> <span class="nonterminal"><a href="/cthulhu/grammar#stmts">stmts</a></span> <span class="literal">"}"</span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#condition">condition</a></span>   <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#expr">expr</a></span></span>
              <span class="sym or">|</span> <span class="sequence"><span class="literal">"let"</span> <span class="nonterminal"><a href="/cthulhu/grammar#pattern">pattern</a></span> <span class="literal">"="</span> <span class="nonterminal"><a href="/cthulhu/grammar#expr">expr</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#consequent">consequent</a></span>  <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"if"</span> <span class="nonterminal"><a href="/cthulhu/grammar#condition">condition</a></span> <span class="nonterminal"><a href="/cthulhu/grammar#block">block</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#alternative">alternative</a></span> <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"else"</span> <span class="nonterminal"><a href="/cthulhu/grammar#consequent">consequent</a></span> <span class="repeater"><span class="sym lparen">(</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#alternative">alternative</a></span></span> <span class="sym rparen">)</span><span class="repeater">?</span></span></span>
              <span class="sym or">|</span> <span class="sequence"><span class="literal">"else"</span> <span class="nonterminal"><a href="/cthulhu/grammar#block">block</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#if_expr">if_expr</a></span>     <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#consequent">consequent</a></span> <span class="repeater"><span class="sym lparen">(</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#alternative">alternative</a></span></span> <span class="sym rparen">)</span><span class="repeater">?</span></span></span>
</span></code></pre>

<h3 id="if-let-conditions">If-let conditions</h3>

<p>Sometimes itâ€™s desirable to perform pattern matching on a value with a single pattern without needing the full power of the <code class="highlighter-rouge">match</code> expression.
For these cases, the if-let expression can be useful.</p>

<p>Instead of a boolean condition, it uses the <code class="highlighter-rouge">let</code> keyword and a single <a href="/cthulhu/spec/patterns">pattern</a>:</p>

<pre><code class="language-cth">let thing = Maybe::Just(123);

if let Maybe::Just(x) = thing {
  -- use the `x` value
};
</code></pre>

<p>If-let conditions <em>can</em> be chained together although a match expression is likely to be more idiomatic and less verbose:</p>

<pre><code class="language-cth">let thing = Maybe::Just(123);

if let Maybe::Just(42) = thing {
  "the answer"
} else if let Maybe::Just(x) = thing {
  "the value: " ++ ::Fmt::int(x)
} else {
  "has no value"
};

-- vs --

match thing {
  Maybe::Just(42) =&gt; "the answer",
  Maybe::Just(x) =&gt; "the value: " ++ ::Fmt::int(x),
  Maybe::None =&gt; "has no value",
};
</code></pre>

<h2 id="loops">Loops</h2>

<h2 id="match-expressions">Match expressions</h2>

<pre class="grammar"><code><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#match_arm_handler">match_arm_handler</a></span> <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#expr">expr</a></span></span>
                    <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#block">block</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#match_arm">match_arm</a></span>         <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#pattern">pattern</a></span> <span class="literal">"=&gt;"</span> <span class="nonterminal"><a href="/cthulhu/grammar#match_arm_handler">match_arm_handler</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#match_expr">match_expr</a></span>        <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"match"</span> <span class="literal">"{"</span> <span class="repeater"><span class="sym lparen">(</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#match_arm">match_arm</a></span></span> <span class="sym rparen">)</span><span class="repeater">+</span></span> <span class="literal">"}"</span></span>
</span></code></pre>

<p>See the <a href="/cthulhu/spec/patterns">Patterns chapter</a> for information about how to construct patterns.</p>

      </article>
    </main>
  </body>
</html>
