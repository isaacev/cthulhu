<!DOCTYPE html>
<html>
  <head>
    <title>Language Specification</title>
    <link rel="stylesheet" href="/cthulhu/assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
      integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <main>
      <article>
        <h1>Types</h1>
        <pre class="grammar"><code><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#unit_type">unit_type</a></span>     <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"()"</span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#param_type">param_type</a></span>    <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"'"</span> <span class="nonterminal"><a href="/cthulhu/grammar#lower_ident">lower_ident</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#named_type">named_type</a></span>    <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#upper_path">upper_path</a></span> <span class="repeater"><span class="sym lparen">(</span> <span class="sequence"><span class="literal">"("</span> <span class="nonterminal"><a href="/cthulhu/grammar#type">type</a></span> <span class="repeater"><span class="sym lparen">(</span> <span class="sequence"><span class="literal">","</span> <span class="nonterminal"><a href="/cthulhu/grammar#type">type</a></span></span> <span class="sym rparen">)</span><span class="repeater">*</span></span> <span class="literal">")"</span></span> <span class="sym rparen">)</span><span class="repeater">?</span></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#grouped_type">grouped_type</a></span>  <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"("</span> <span class="nonterminal"><a href="/cthulhu/grammar#type">type</a></span> <span class="literal">")"</span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#list_type">list_type</a></span>     <span class="sym defined-as">::=</span> <span class="sequence"><span class="literal">"["</span> <span class="nonterminal"><a href="/cthulhu/grammar#type">type</a></span> <span class="literal">"]"</span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#simple_type">simple_type</a></span>   <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#unit_type">unit_type</a></span></span>
                <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#param_type">param_type</a></span></span>
                <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#named_type">named_type</a></span></span>
                <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#grouped_type">grouped_type</a></span></span>
                <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#list_type">list_type</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#function_type">function_type</a></span> <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#simple_type">simple_type</a></span> <span class="literal">"-&gt;"</span> <span class="nonterminal"><a href="/cthulhu/grammar#type">type</a></span></span>
</span><span class="production"><span class="nonterminal"><a href="/cthulhu/grammar#type">type</a></span>          <span class="sym defined-as">::=</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#simple_type">simple_type</a></span></span>
                <span class="sym or">|</span> <span class="sequence"><span class="nonterminal"><a href="/cthulhu/grammar#function_type">function_type</a></span></span>
</span></code></pre>

<h2 id="equality">Equality</h2>

<p>The language has a specific definition of type equality.</p>

<p>When comparing two types, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">T_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, the following rules are applied:</p>

<ol>
  <li>blah blah blah</li>
  <li>blah blah blah</li>
</ol>

<h2 id="pre-defined-types">Pre-defined types</h2>

<p>The following types are baked into the language to represent the most primitive values.
They are defined in the standard library in the <code class="highlighter-rouge">Kernel.cth</code> file.</p>

<h3 id="str-type"><code class="highlighter-rouge">Str</code> type</h3>

<h3 id="float-type"><code class="highlighter-rouge">Float</code> type</h3>

<h3 id="int-type"><code class="highlighter-rouge">Int</code> type</h3>

<h3 id="bool-type"><code class="highlighter-rouge">Bool</code> type</h3>

<h3 id="maybe-type"><code class="highlighter-rouge">Maybe</code> type</h3>

<p>The <code class="highlighter-rouge">Maybe</code> type is defined as:</p>

<pre><code class="language-cth">type Maybe('a) =
  | Just('a)
  | None;
</code></pre>

<p>The <code class="highlighter-rouge">Maybe</code> type is used to represent the possible absence of a value.
This allows the <code class="highlighter-rouge">Maybe</code> type to be used in many of the places that other languages like Java or Ruby may use null or nil.</p>

<h3 id="result-type"><code class="highlighter-rouge">Result</code> type</h3>

<p>The <code class="highlighter-rouge">Result</code> type is defined as:</p>

<pre><code class="language-cth">type Result('a, 'b) =
  | Ok('a)
  | Err('b);
</code></pre>

<p>The <code class="highlighter-rouge">Result</code> type makes it possible to describe operations that have one type for the successful case and another type for the failure case.</p>

<p>While its definition might not look like much, the <code class="highlighter-rouge">Result</code> type is the main mechanism for handling errors.
Because the language doesn’t have throwable exceptions, errors need to be handled using existing control flow structures.</p>

<h2 id="list-types">List types</h2>

<h2 id="function-types">Function types</h2>

<h2 id="union-types">Union types</h2>

<h2 id="type-parameters">Type parameters</h2>

<h2 id="type-inference">Type inference</h2>

<p>Type inference is the process by which type parameters are automatically assigned a type based on the use of that parameter in code.
Type inference takes place in a few places:</p>

<ul>
  <li>Function application</li>
  <li>Union construction</li>
  <li>List creation</li>
</ul>

<p><strong>An example of type inference in function application:</strong></p>

<pre><code class="language-cth">fn id(thing: 'a) -&gt; 'a {
  thing
}

fn main() -&gt; () {
  let i: Int   = id(123);  -- this call is valid
  let f: Float = id(3.14); -- this call is also valid
}
</code></pre>

<p>In this example, an identity function <code class="highlighter-rouge">id</code> exists that takes a value of any type and immediately returns that value.
The function may not be very interesting but it demonstrates a use of type parameters where the output type of a function is related to its input type.</p>

      </article>
    </main>
  </body>
</html>
